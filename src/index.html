<!DOCTYPE html>
<html>
<head>
<title>News </title>
<link  rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  
  
  <span id="msg"></span>
<div id="loading">
     
  </div>


<h1 id="main-title">News Aggregator</h1>
<button id="getNews" class="newsbtn">Click here for news</button>
<input id="search" onkeyup="myFunction()" type="text" placeholder="Type and press enter to search">
<div id="output">
</div>
<script>
  
	"use strict";



let input = document.getElementById('search');

input.addEventListener('keyup', (e) => {
  if (e.keyCode === 13) {

    fetchNewsApi(e.target.value);

   }


 })
 
async function fetchNewsApi(fill) {

document.getElementById('loading').style.display = "";

let url = await `https://newsapi.org/v2/top-headlines?country=in&apiKey=fcf951aed5be4984ba5644d81df16a92`;
const response = await fetch(url);
const data = await response.json();
console.log(data);



 document.getElementById("main-container").innerHTML =  `
${data.articles.map(function(x) {
     return `
           <li>
             <div class="card">
              <img src="${x.urlToImage}" class="card-img-top" alt="..." class="article-img"><br/>
              <h2 class="article-title">${x.title}</h2>
              <p class="article-description">${x.description}</p>
              <span class="article-author">${x.author}</span>
              <a class="article-link" href="${x.url}">Go for full article</a>
            </div>    
           </li>
 `
    }).join('') }
  
  `


if (data.articles.length === 0) {
   document.getElementById('msg').textContent = "result not found"
 }

  input.addEventListener('input', evt => {
  const value = input.value;
 

  if (value == '') {
      
   
      document.getElementById('msg').textContent = ""

      fetchNewsApi("apple");
      document.getElementById('loading').style.display = "none";
  } 

})

  document.getElementById('loading').style.display = "none";

}

  fetchNewsApi("apple");
	
	
	
  </script>

</body>
</html>

